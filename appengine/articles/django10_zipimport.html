
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">















 
 
 
 
 
 
 
  
  


<html>
  <head>
    <script type="text/javascript" language="JavaScript">
    ORIGINAL_PAGE_PATH = "/appengine/articles/django10_zipimport.html";
    </script>
    
    
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Using Django 1.0 on App Engine with Zipimport - Google App Engine - Google Code</title>
<script type="text/javascript"><!--
(function(){function a(){this.t={};this.tick=function(c){this.t[c]=(new Date).getTime()};this.tick("start")}var b=new a;window.jstiming={Timer:a,load:b};if(window.external&&window.external.pageT)window.jstiming.pt=window.external.pageT;})();

var _tocPath_ = '/appengine/docs/_toc.ezt';
//--></script>
<link href="../../css/codesite.pack.01312008.css" type="text/css" rel="stylesheet"></link>
<script src="../../js/codesite.pack.01312008.js" type="text/javascript"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Google Code" href="http://code.google.com/osd.xml" />

<!--[if IE]><link rel="stylesheet" type="text/css" href="../../css/iehacks.css" /><![endif]-->

    <link href="../../css/semantic_headers.css" rel="stylesheet" type="text/css" />
    <link href="../css/local_extensions.css" rel="stylesheet" type="text/css" />
  </head>

  <body class="gc-documentation">

    
    
    <div id="gc-container">
<a name="top"></a>
<div id="skipto">
  <a href="#gc-pagecontent-anchor">Skip to page content</a>
  <a href="#gc-toc-anchor">Skip to main navigation</a>
</div>
<div id="langpref">
   <a class="dropdown" href="http://code.google.com">English</a>
   <span>|</span>
   <a href="http://code.google.com/more/#products-products-android">Site Directory</a>
</div>
<div id="gc-header">
  <div id="logo"><a href="http://code.google.com">
  
     <img src="../../images/cleardot.gif" height="1px" width="1px" alt="Google Code Home Page" id="gc-logo-img"/>
  
  </a></div>
  <div id="search">
    <div id="searchForm" class="searchForm">
      <form id="cse" action="http://www.google.com/cse" accept-charset="utf-8" class="gsc-search-box" onsubmit="executeGSearch(document.getElementById('gsearchInput').value); return false;">
      <noscript>
      <input type="hidden" name="cref" value="http://code.google.com/cse/googlecode-context.xml"/>
      </noscript>
        <table class="gsc-search-box" cellpadding="0" cellspacing="0">
          <tbody>
            <tr>
              <td class="gsc-input">
                <input id="gsearchInput" type="text" name="q" maxlength="2048" class="gsc-input" autocomplete="off" title="Google Code Search" style="width:345px"/>
              </td>
              <td class="gsc-search-button">
                <div id="cs-searchresults" onclick="event.cancelBubble = true;"></div>
                <input title="Search" id="gsearchButton" class="gsc-search-button" name="sa" value="Search" type="submit"/>
              </td>
            </tr>
            <tr>
              <td colspan="2" class="greytext">e.g. "templates" or "datastore"</td>
            </tr>
          </tbody>
        </table>
      </form>
    </div> <!-- end searchForm -->
  </div> <!-- end search -->
</div> <!-- end gc-header -->


<div id="codesiteContent">

<a name="gc-topnav-anchor"></a>
<div id="gc-topnav">
  <h1>Google App Engine</h1>
  <ul id="articles" class="gc-topnav-tabs">

    <li id="home_link">
      <a href="../index.html" title="Google App Engine home page">Home</a>
    </li>
  
    <li id="docs_link">
      <a href="../docs/index.html" title="Official Google App Engine documentation">Docs</a>
    </li>
  
    <li id="faq_link">
      <a href="../kb/index.html" title="Answers to frequently asked questions about Google App Engine">FAQ</a>
    </li>
  
    <li id="articles_link">
      <a href="index.html" class="selected" title="Focused articles and tutorials for Google App Engine developers">Articles</a>
    </li>
  
    <li>
      <a href="http://googleappengine.blogspot.com/" title="Official Google App Engine blog">Blog</a>
    </li>
  
    <li>
      <a href="http://groups.google.com/group/google-appengine" title="Google App Engine developer forum">Group</a>
    </li>
  
    <li>
      <a href="../terms.html" title="Google App Engine terms of service">Terms</a>
    </li>
  
    <li>
      <a href="../downloads.html" title="Download Google App Engine">Download</a>
    </li>
  

  </ul>
</div> <!-- end gc-topnav -->

    <div class="g-section g-tpl-170">

      <a name="gc-toc-anchor"></a>  
      <div class="g-unit g-first" id="gc-toc">
        <ul>
  <li><a href="../downloads.html">Downloads</a></li>
  <li><a href="http://code.google.com/status/appengine">System Status</a></li>
  <li><a href="http://code.google.com/p/googleappengine/issues/list">Issue Tracker</a></li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Introduction</h2>
    <ul>
      <li><a href="../docs/whatisgoogleappengine.html">What Is Google App Engine?</a></li>
      <li><a href="../docs/python/gettingstarted/index.html">Getting Started: Python</a>
        <ul>
            <li><a href="../docs/python/gettingstarted/introduction.html">Introduction</a></li>
  <li><a href="../docs/python/gettingstarted/devenvironment.html">The Development Environment</a></li>
  <li><a href="../docs/python/gettingstarted/helloworld.html">Hello, World!</a></li>
  <li><a href="../docs/python/gettingstarted/usingwebapp.html">Using the webapp Framework</a></li>
  <li><a href="../docs/python/gettingstarted/usingusers.html">Using the Users Service</a></li>
  <li><a href="../docs/python/gettingstarted/handlingforms.html">Handling Forms With webapp</a></li>
  <li><a href="../docs/python/gettingstarted/usingdatastore.html">Using the Datastore</a></li>
  <li><a href="../docs/python/gettingstarted/templates.html">Using Templates</a></li>
  <li><a href="../docs/python/gettingstarted/staticfiles.html">Using Static Files</a></li>
  <li><a href="../docs/python/gettingstarted/uploading.html">Uploading Your Application</a></li>

        </ul>
      </li>
      <li><a href="../docs/quotas.html">Quotas</a></li>
      <li><a href="../docs/theadminconsole.html">The Admin Console</a></li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Python</h2>
    <ul>
          
    <li><a href="../docs/python/runtime.html">Runtime</a></li>
    <li><a href="../docs/python/tools/index.html">Tools</a>
      <ul>
            <li><a href="../docs/python/tools/configuration.html">Configuration</a></li>
    <li><a href="../docs/python/tools/devserver.html">Development Server</a></li>
    <li><a href="../docs/python/tools/uploadinganapp.html">Uploading an App</a></li>
    <li><a href="../docs/python/tools/webapp/index.html">webapp Framework</a>
      <ul>
             <li><a href="../docs/python/tools/webapp/overview.html">Overview</a></li>
     <li><a href="../docs/python/tools/webapp/running.html">Running the Application</a></li>
     <li><a href="../docs/python/tools/webapp/requesthandlers.html">Request Handlers</a></li>
     <li><a href="../docs/python/tools/webapp/requestdata.html">Request Data</a></li>
     <li><a href="../docs/python/tools/webapp/buildingtheresponse.html">Building the Response</a></li>
     <li><a href="../docs/python/tools/webapp/redirects.html">Redirects, Headers and Status Codes</a></li>
     

     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/tools/webapp/requestclass.html">Request</a></li>
         <li><a href="../docs/python/tools/webapp/responseclass.html">Response</a></li>
         <li><a href="../docs/python/tools/webapp/requesthandlerclass.html">RequestHandler</a></li>
         <li><a href="../docs/python/tools/webapp/wsgiapplicationclass.html">WSGIApplication</a></li>
         <li><a href="../docs/python/tools/webapp/utilmodule.html">Utility Functions</a></li>
         
       </ul>
     </li>

      </ul>
    </li>

      </ul>
    </li>
    <li><a href="../docs/python/apis.html">Service APIs</a>
      <ul>
        <li><a href="../docs/python/datastore/index.html">Datastore</a>
          <ul>
                 <li><a href="../docs/python/datastore/overview.html">Overview</a></li>
     <li><a href="../docs/python/datastore/entitiesandmodels.html">Entities and Models</a></li>
     <li><a href="../docs/python/datastore/creatinggettinganddeletingdata.html">Creating, Getting and Deleting Data</a></li>
     <li><a href="../docs/python/datastore/keysandentitygroups.html">Keys and Entity Groups</a></li>
     <li><a href="../docs/python/datastore/queriesandindexes.html">Queries and Indexes</a></li>
     <li><a href="../docs/python/datastore/transactions.html">Transactions</a></li>

     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/datastore/modelclass.html">Model</a></li>
         <li><a href="../docs/python/datastore/expandoclass.html">Expando</a></li>
         <li><a href="../docs/python/datastore/polymodelclass.html">PolyModel</a></li>
         <li><a href="../docs/python/datastore/propertyclass.html">Property</a></li>
         <li><a href="../docs/python/datastore/queryclass.html">Query</a></li>
         <li><a href="../docs/python/datastore/gqlqueryclass.html">GqlQuery</a></li>
         <li><a href="../docs/python/datastore/keyclass.html">Key</a></li>
         <li><a href="../docs/python/datastore/functions.html">Functions</a></li>
         <li><a href="../docs/python/datastore/typesandpropertyclasses.html">Types and Property Classes</a></li>
         <li><a href="../docs/python/datastore/gqlreference.html">GQL Reference</a></li>
         <li><a href="../docs/python/datastore/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/memcache/index.html">Memcache</a>
          <ul>
                 <li><a href="../docs/python/memcache/overview.html">Overview</a></li>
      <li><a href="../docs/python/memcache/usingmemcache.html">Using Memcache</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/memcache/clientclass.html">Client</a></li>
         <li><a href="../docs/python/memcache/functions.html">Functions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/urlfetch/index.html">URL Fetch</a>
          <ul>
                 <li><a href="../docs/python/urlfetch/overview.html">Overview</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/urlfetch/fetchfunction.html">The fetch Function</a></li>
         <li><a href="../docs/python/urlfetch/responseobjects.html">Response Objects</a></li>
         <li><a href="../docs/python/urlfetch/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/mail/index.html">Mail</a>
          <ul>
                 <li><a href="../docs/python/mail/overview.html">Overview</a></li>
     <li><a href="../docs/python/mail/sendingmail.html">Sending Mail</a></li>
     <li><a href="../docs/python/mail/attachments.html">Attachments</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/mail/emailmessageclass.html">EmailMessage</a></li>
         <li><a href="../docs/python/mail/emailmessagefields.html">Message Fields</a></li>
         <li><a href="../docs/python/mail/functions.html">Functions</a></li>
         <li><a href="../docs/python/mail/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/images/index.html">Images</a>
          <ul>
                 <li><a href="../docs/python/images/overview.html">Overview</a></li>
     <li><a href="../docs/python/images/installingPIL.html">Installing PIL</a></li>
     <li><a href="../docs/python/images/usingimages.html">Using the Images API</a></li>
     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/images/imageclass.html">Image</a></li>
         <li><a href="../docs/python/images/functions.html">Functions</a></li>
         <li><a href="../docs/python/images/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/python/users/index.html">Google Accounts</a>
          <ul>
                 <li><a href="../docs/python/users/overview.html">Overview</a></li>
     <li><a href="../docs/python/users/userobjects.html">User Objects</a></li>
     <li><a href="../docs/python/users/loginurls.html">Login URLs</a></li>
     <li><a href="../docs/python/users/adminusers.html">Admin Users</a></li>

     <li><span class="tlw-title tlw-expanded">Reference</span>
       <ul>
         <li><a href="../docs/python/users/userclass.html">User</a></li>
         <li><a href="../docs/python/users/functions.html">Functions</a></li>
         <li><a href="../docs/python/users/exceptions.html">Exceptions</a></li>
       </ul>
     </li>

          </ul>
        </li>
        <li><a href="../docs/usinggdataservices.html">Using Google Data Services</a></li>
      </ul>
    </li>

    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><h2>Resources</h2>
    <ul>
      <li><a href="../kb/index.html">FAQ</a></li>
      <li><a href="index.html">Articles</a></li>
      <li><a href="http://appengine-cookbook.appspot.com/">Cookbook</a></li>
      <li><a href="http://appgallery.appspot.com/">App Gallery</a></li>
      <li><a href="http://code.google.com/p/googleappengine/">SDK Code</a></li>
      <li><a href="http://code.google.com/p/google-app-engine-samples/">Sample Apps Code</a></li>
      <li><a href="../groups.html">Discussion Groups</a></li>
    </ul>
  </li>
</ul>
<div class="line"></div>
<ul>
  <li><a href="../docs/roadmap.html">Product Roadmap</a></li>
  <li><a href="http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes">Release Notes</a></li>
  <li><a href="../docs/revision_history.html">Revision History</a></li>
</ul>

        <a class="hidden" href="#gc-topnav-anchor">More Google App Engine resource links</a>
      </div>
      
      <a name="gc-pagecontent-anchor"></a>   
      <div class="g-unit" id="gc-pagecontent">
        <script type="text/javascript">CODESITE_docEarlyProcessing();</script>
        <h1 class="page_title">Using Django 1.0 on App Engine with Zipimport</h1>


<i>Dan Sanderson</i><br />
<i>September 2008</i>

<div id="jd-content">
<div class="jd-descr">

  <h2>Introduction</h2>
  <p>Using a Python web application framework with your App Engine application is usually as simple as including the files for the framework with your application's code.  However, there is a limit to the number of files that can be uploaded for an application, and the standard distributions for some frameworks exceed this limit or leave little room for application code.  You can work around the file limit using Python's "zipimport" feature, which is supported by App Engine as of the 1.1.3 release (September 2008).</p>
  <p>This article describes how to use Django 1.0 with Google App Engine using the "zipimport" feature.  You can use similar techniques with other frameworks, libraries or large applications.</p>


  <h2>Introducing zipimport</h2>
  <p>When your application imports a module, Python looks for the module's code in one of several directories.  You can access and change the list of directories Python checks from Python code using <code>sys.path</code>.  In App Engine, your handler is called with a path that includes the App Engine API and your application root directory.</p>
  <p>If any of the items in <code>sys.path</code> refers to a ZIP-format archive, Python will treat the archive as a directory.  The archive contains the <code>.py</code> source files for one or more modules.  This feature is supported by a module in the standard library called <code>zipimport</code>, though this module is part of the default import process and you do not need to import this module directly to use it.  For more information about zipimport, see <a href="http://docs.python.org/lib/module-zipimport.html">the zipimport documentation</a>.</p>
  <p>To use module archives with your App Engine application:</p>
  <ol>
    <li>Create a ZIP-format archive of the modules you want to bundle.</li>
    <li>Put the archive in your application directory.</li>
    <li>If necessary, in your handler scripts, add the archive file to <code>sys.path</code>.</li>
  </ol>
  <p>For example, if you have a ZIP archive named <code>django.zip</code> with the following files in it:</p>
  <pre>
django/forms/__init__.py
django/forms/fields.py
django/forms/forms.py
django/forms/formsets.py
django/forms/models.py
...
</pre>
  <p>A handler script can import a module from the archive as follows:</p>
  <pre class="prettyprint">
import sys
sys.path.insert(0, 'django.zip')

import django.forms.fields
</pre>
  <p><b>Note:</b> This example illustrates zipimport, but is not sufficient for loading Django 1.0 in App Engine.  A more complete example follows.</p>


  <h2>zipimport and App Engine</h2>
  <p>App Engine uses a custom version of the zipimport feature instead of the standard implementation.  It generally works the usual way: add the Zip archive to <code>sys.path</code>, then import as usual.</p>
  <p>Because it is a custom implementation, several undocumented features do not work with App Engine.  For instance, App Engine can load <code>.py</code> files from the archive, but it can't load <code>.pyc</code> files like the standard version can.  The SDK uses the standard version, so if you'd like to use undocumented features of zipimport, be sure to test them on App Engine.</p>
  <p>There is currently a bug in App Engine's app caching logic where <code>sys.path</code> is reset for each request, even after imports have been cached.  If your app does not necessarily import all the modules it needs when the handler script is first loaded, the handler's <code>main()</code> routine must reinstate <code>sys.path</code> as needed:</p>
  <pre class="prettyprint">import sys
django_path = 'django.zip'
sys.path.insert(0, django_path)

def main():
  if django_path not in sys.path:
    sys.path.insert(0, django_path)
</pre>


  <h2>Archiving Django 1.0</h2>
  <p>When App Engine launched in Summer 2008, it included <a href="http://www.djangoproject.com/">the Django application framework</a> as part of the environment to make it easy to get started.  At the time, the latest release of Django was 0.96, so this is the version that is part of version "1" of the Python runtime environment.  Since then, the Django project released version 1.0.  For compatibility reasons, App Engine can't update its version of Django without also releasing a new version of the Python runtime environment.  To use 1.0 with App Engine with version "1" of the runtime environment, an application must include the 1.0 distribution in its application directory.</p>
  <p>The Django 1.0 distribution contains 1,582 files. An App Engine application is limited to 1,000 files, so the Django distribution can't be included directly.  Of course, not every file in the distribution needs to be included with the application.  You can prune the distribution to remove documentation files, unused locales, database interfaces and other components that don't work with App Engine (such as the Admin application) to get the file count below the limit.</p>
  <p>Using zipimport, you can include Django 1.0 with your application using just 1 file.  However, each application file cannot be larger than 1 MB, and a single ZIP archive of Django 1.0 is over 3 MB.  The easiest method is to create a single archive that contains all of Django except unused locales and components.</p>
  <p>To download and re-package Django 1.0 as several ZIP archives:</p>
  <ol>
    <li>Download the Django 1.0 distribution from <a href="http://www.djangoproject.com/">the Django website</a>.  Unpack this archive using an appropriate tool for your operating system (a tool that can unpack a <code>.tar.gz</code> file).  For example, on the Linux or Mac OS X command line:
      <pre>tar -xzvf Django-1.0.tar.gz</pre>
    </li>
    <li>Create a ZIP archive that contains everything in the <code>django/</code> directory except for the <code>.../conf/</code> and <code>.../contrib/</code> sub-directories.  (You can also omit <code>bin/</code> and <code>test/</code>.)  The path inside the ZIP must start with <code>django/</code>.
      <pre>cd Django-1.0
zip -r django.zip django/__init__.py django/bin django/core \
                  django/db django/dispatch django/forms \
                  django/http django/middleware django/shortcuts \
                  django/template django/templatetags \
                  django/test django/utils django/views
</pre>
    </li>
    <li>
      <p>The <code>conf</code> package contains a large number of localization files.  Adding all of these files to the archive would increase the size of the archive beyond the 1 MB limit.  However, there's room for a few files, and many Django packages need some parts of <code>conf</code>.  Add everything in <code>conf</code> except the <code>locale</code> directory to the archive.  If necessary, you can also add the specific locales you need, but be sure to check that the file size of the archive is below 1 MB.</p>
      <p>The following command adds everything in <code>conf</code> except <code>conf/locale</code> to the archive:</p>
      <pre>zip -r django.zip django/conf -x 'django/conf/locale/*'
</pre>
    </li>
    <li>Similarly, if you need anything in <code>.../contrib/</code>, add it to the archive.  The largest component in <code>contrib</code> is the Django Admin application, which doesn't work with App Engine, so you can safely omit the <code>admin</code> and <code>admindocs</code> directories.  For example, to add <code>formtools</code>:
      <pre>zip -r django.zip django/contrib/__init__.py \
                  django/contrib/formtools
</pre>
    </li>
    <li>Put the archive file in your application directory.
<pre>
mv django.zip <i>your-app-dir</i>/
</pre>
    </li>
  </ol>


  <h2>Using the Module Archive</h2>
  <p class="note"><b>Tip:</b> The latest version of the <a href="http://code.google.com/p/google-app-engine-django/">Django App Engine Helper</a> (starting with version "r64") supports Django 1.0 with zipimport out of the box.  Make sure your archive is named <code>django.zip</code> and is in your application root directory.  All new projects created using the Google App Engine Helper for Django will automatically use django.zip if present. If you are upgrading an existing project you will need to copy the appengine_django, manage.py and main.py files from Google App Engine Helper for Django into your existing project.  See <a href="appengine_helper_for_django.html">Using the Google App Engine Helper for Django</a>.<br/><br/>The following instructions only apply if you are using Django without the Helper, or if you are preparing another module archive.</p>
  <p>To use a module archive, the <code>.zip</code> file must be on the Python module load path.  The easiest way to do this is to modify the load path at the top of each handler script, and in each handler's <code>main()</code> routine.  All other files that use modules in the archives will work without changes.</p>
  <p>Because App Engine pre-loads Django 0.96 for all Python applications, using Django 1.0 requires one more step to make sure the <code>django</code> package refers to 1.0 and not the preloaded version.  As described in the article <a href="django.html">Running Django on App Engine</a>, the handler script must remove Django 0.96 from <code>sys.modules</code> before importing Django 1.0.</p>
  <p>The following code uses the techniques described here to run Django 1.0 from an archive named <code>django.zip</code>:</p>
  <pre class="prettyprint">import sys

# Uninstall Django 0.96.
for k in [k for k in sys.modules if k.startswith('django')]:
  del sys.modules[k]

# Add Django 1.0 archive to the path.
django_path = 'django.zip'
sys.path.insert(0, django_path)

# Django imports and other code go here...
import django.core.handlers.wsgi

def main():
  # Re-add Django 1.0 archive to the path, if needed.
  if django_path not in sys.path:
    sys.path.insert(0, django_path)

  # Run Django via WSGI.
  application = django.core.handlers.wsgi.WSGIHandler()
  util.run_wsgi_app(application)

if __name__ == '__main__':
  main()
</pre>

<p>With appropriate <code>app.yaml</code>, <code>settings.py</code> and <code>urls.py</code> files, this handler displays the Django "It worked!" page.  See <a href="django.html">Running Django on App Engine</a> for more information on using Django.</p>


  <h2>Using Multiple Archive Files for a Single Package</h2>
  <p>Since all of Django 1.0 is too large to fit into a single archive, can we split it into multiple archives, each on <code>sys.path</code>?  Actually yes, with some bootstrapping code to help Python navigate the different locations.</p>
  <p>When Python imports a module, it checks each location mentioned in <code>sys.path</code> for the package that contains the module.  If a location does not contain the first package in the module's path, Python checks the next <code>sys.path</code> entry, and so on until it finds the first package or runs out of locations to check.</p>
  <p>When Python finds the first package in the module's path, it assumes that wherever it found it is the definitive location for that package, and it won't bother looking for it elsewhere.  If Python cannot find the rest of the module path in the package, it raises an import error and stops.  Python does not check subsequent <code>sys.path</code> entries after the first package in the path has been found.</p>
  <p>You can work around this by importing the package that is split across multiple archives from the first archive, then telling Python that the contents of the package can actually be found in multiple places.  The <code>__path__</code> member of a package (module) object is a list of locations for the package's contents.  For example, if the <code>django</code> package is split between two archives called <code>django1.zip</code> and <code>django2.zip</code>, the following code tells Python to look in both archives for the contents of the package:</p>
  <pre class="prettyprint">
sys.path.insert(0, 'django1.zip')
import django
django.__path__.append('django2.zip/django')
</pre>
  <p>This imports the <code>django</code> package from <code>django1.zip</code>, so make sure that archive contains <code>django/__init__.py</code>.</p>
  <p>With the second archive on the package's <code>__path__</code>, subsequent imports of modules inside <code>django</code> will search both archives.</p>


  <h2>Additional Notes</h2>
  <p>Some additional things to note about using zipimport with App Engine:</p>
  <ul>
    <li>Module archives use additional CPU time the first time a module is imported.  Imports are cached in memory for future requests to the same application instance, and modules from archives are cached uncompressed and compiled, so subsequent imports on the same instance will not incur CPU overhead for decompression or compilation.</li>
    <li>The App Engine implementation of zipimport only supports <code>.py</code> files, not precompiled <code>.pyc</code> files.</li>
    <li>Because handler scripts are responsible for adding module archives to the path, handler scripts themselves cannot be stored in module archives.  Any other Python code can be stored in module archives.</li>
  </ul>

</div>
</div>

   
      </div><!-- end gc-pagecontent -->
   </div><!-- end gooey wrapper -->

    </div> <!-- end codesite content -->

<div id="gc-footer" dir="ltr">
  <div class="text">
    
      <div class="notice"><div id="notice" style="text-align: center; border: 1em 0em 1em 0em">
  Except as otherwise <a
  href="http://code.google.com/policies.html#restrictions">noted</a>,
  the content of this page is licensed under <a rel="license"
  href="http://creativecommons.org/licenses/by/2.5/">a Creative Commons
  license</a>, and examples are licensed under
  <a rel="license" href="http://www.apache.org/licenses/LICENSE-2.0">an Apache
  license</a>.
<!-- <rdf:RDF xmlns="http://web.resource.org/cc/" 
              xmlns:dc="http://purl.org/dc/elements/1.1/"
              xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
  <Work rdf:about="">
    <license rdf:resource="http://creativecommons.org/licenses/by/2.5/" />
  </Work>
  <License rdf:about="http://creativecommons.org/licenses/by/2.5/">
    <permits rdf:resource="http://web.resource.org/cc/Reproduction"/>
    <permits rdf:resource="http://web.resource.org/cc/Distribution"/>
    <requires rdf:resource="http://web.resource.org/cc/Notice"/>
    <requires rdf:resource="http://web.resource.org/cc/Attribution"/>
    <permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"/>
  </License>
</rdf:RDF> -->
</div>
</div>
    
    &copy;2009 Google -
    <a href="http://code.google.com">Code Home</a> -
    <a href="http://www.google.com/accounts/TOS">Terms of Service</a> -
    <a href="http://www.google.com/privacy.html">Privacy Policy</a> -
    <a href="http://moderator.appspot.com/#e%253Dagltb2RlcmF0b3JyDgsSBlNlcmllcxifggIM%252Bv%253D0">Feedback</a> -
    <a href="http://code.google.com/more/#products-products-android">Site Directory</a>
     <br />
     <br />
    Google Code offered in:
    <a href="http://code.google.com/intl/zh-CN" onclick="return CODESITE_redirectToI18nContent(this)">中文</a> -
    <a href="http://code.google.com/intl/en" onclick="return CODESITE_redirectToI18nContent(this)">English</a> -
    <a href="http://code.google.com/intl/pt-BR" onclick="return CODESITE_redirectToI18nContent(this)">Português</a> -
    <a href="http://code.google.com/intl/ru" onclick="return CODESITE_redirectToI18nContent(this)">Pусский</a> -
    <a href="http://code.google.com/intl/es" onclick="return CODESITE_redirectToI18nContent(this)">Español</a> -
    <a href="http://code.google.com/intl/ja" onclick="return CODESITE_redirectToI18nContent(this)">日本語</a>
  </div>
</div><!-- end gc-footer -->

</div><!-- end gc-containter -->





  </body>
</html>


